{
  "type": "object",
  "properties": {
    "entities": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/entity"
      }
    }
  },
  "$defs": {
    "entity": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "transform": {
          "type": "object",
          "properties": {
            "position": {
              "$ref": "#/$defs/vector3"
            },
            "rotation": {
              "$ref": "#/$defs/quaternion"
            },
            "scale": {
              "$ref": "#/$defs/vector3"
            }
          }
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/entity"
          }
        },
        "modules": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/camera"
              },
              {
                "$ref": "#/$defs/light"
              },
              {
                "$ref": "#/$defs/mesh"
              },
              {
                "$ref": "#/$defs/rigidbody"
              },
              {
                "$ref": "#/$defs/collider"
              }
            ]
          }
        }
      }
    },
    "camera": {
      "type": "object",
      "properties": {
        "type": {
          "const": "camera"
        }
      }
    },
    "light": {
      "type": "object",
      "properties": {
        "type": {
          "const": "light"
        },
        "lightType": {
          "type": "string",
          "enum": [
            "directional",
            "point",
            "spot",
            "ambient"
          ]
        },
        "intensity": {
          "type": "number"
        },
        "castShadows": {
          "type": "boolean"
        },
        "color": {
          "$ref": "#/$defs/color"
        },
        "directionalVector": {
          "$ref": "#/$defs/vector3"
        }
      }
    },
    "mesh": {
      "type": "object",
      "properties": {
        "type": {
          "const": "mesh"
        },
        "geometryType": {
          "type": "string",
          "enum": [
            "BoxGeometry",
            "SphereGeometry",
            "PlaneGeometry",
            "CylinderGeometry",
            "ConeGeometry",
            "RingGeometry",
            "EdgesGeometry",
            "WireframeGeometry",
            "Custom"
          ]
        },
        "materialType": {
          "type": "string",
          "enum": [
            "MeshBasicMaterial",
            "MeshStandardMaterial",
            "MeshPhongMaterial",
            "SpriteMaterial"
          ]
        }
      }
    },
    "rigidbody": {
      "type": "object",
      "properties": {
        "type": {
          "const": "rigidbody"
        },
        "mass": {
          "type": "number"
        }
      }
    },
    "collider": {
      "type": "object",
      "properties": {
        "type": {
          "const": "collider"
        },
        "colliderType": {
          "type": "string",
          "enum": [
            "ball",
            "box",
            "capsule"
          ]
        },
        "radius": {
          "type": "number"
        },
        "halfHeight": {
          "type": "number"
        },
        "halfExtents": {
          "$ref": "#/$defs/vector3"
        }
      }
    },
    "vector3": {
      "type": "object",
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      }
    },
    "quaternion": {
      "type": "object",
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        },
        "w": {
          "type": "number"
        }
      }
    },
    "color": {
      "type": "object",
      "properties": {
        "r": {
          "type": "number"
        },
        "g": {
          "type": "number"
        },
        "b": {
          "type": "number"
        },
        "a": {
          "type": "number"
        }
      }
    }
  }
}